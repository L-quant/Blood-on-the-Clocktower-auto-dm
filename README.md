# ğŸ©¸ è¡€æŸ“é’Ÿæ¥¼ - Agent Auto DM è‡ªåŠ¨åŒ–è¯´ä¹¦äºº

<p align="center">
  <img src="frontend/src/assets/demon-head.png" alt="Blood on the Clocktower" width="120" />
</p>

<p align="center">
  <strong>ä¸€ä¸ªç”± AI Agent æ‹…ä»»è¯´ä¹¦äººçš„å¤šäººå®æ—¶ç¤¾äº¤æ¨ç†æ¸¸æˆå¹³å°</strong>
</p>

<p align="center">
  <a href="#ä¸­æ–‡æ–‡æ¡£">ä¸­æ–‡</a> â€¢
  <a href="#english-documentation">English</a>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Go-1.21+-00ADD8?style=flat-square&logo=go" alt="Go" />
  <img src="https://img.shields.io/badge/Vue-2.6-4FC08D?style=flat-square&logo=vue.js" alt="Vue 2" />
  <img src="https://img.shields.io/badge/MySQL-8.0-4479A1?style=flat-square&logo=mysql" alt="MySQL" />
  <img src="https://img.shields.io/badge/Redis-7-DC382D?style=flat-square&logo=redis" alt="Redis" />
  <img src="https://img.shields.io/badge/RabbitMQ-3.12-FF6600?style=flat-square&logo=rabbitmq" alt="RabbitMQ" />
  <img src="https://img.shields.io/badge/Qdrant-Vector_DB-24B6A5?style=flat-square" alt="Qdrant" />
</p>

---

<a name="ä¸­æ–‡æ–‡æ¡£"></a>
# ğŸ“– ä¸­æ–‡æ–‡æ¡£

## ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [æŠ€æœ¯äº®ç‚¹](#æŠ€æœ¯äº®ç‚¹)
- [ä¸šåŠ¡åŠŸèƒ½](#ä¸šåŠ¡åŠŸèƒ½)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)

## é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªè¾…åŠ©ã€Šè¡€æŸ“é’Ÿæ¥¼ã€‹çº¿ä¸‹æ¡Œæ¸¸çš„è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œå¯ä»¥**å®Œå…¨æ›¿ä»£äººç±»è¯´ä¹¦äºº**è¿›è¡Œæ¸¸æˆæµç¨‹æ¨è¿›ã€è§„åˆ™åˆ¤å®šã€ä¿¡æ¯åˆ†å‘å’Œå¤ç›˜æ€»ç»“ã€‚

### æ ¸å¿ƒåœºæ™¯

- ğŸ® **çº¿ä¸‹èšä¼š**ï¼šç©å®¶é¢å¯¹é¢å›´åï¼Œå„è‡ªé€šè¿‡æ‰‹æœºå‚ä¸æ¸¸æˆ
- ğŸ“± **å…ç™»å½•æé€Ÿå¼€å±€**ï¼šæ— éœ€æ³¨å†Œè´¦å·ï¼Œæˆ¿ä¸»åˆ›å»ºæˆ¿é—´ååˆ†äº«æˆ¿é—´å·å³å¯
- ğŸ¤– **AI Auto DM**ï¼šå¤š Agent åä½œç³»ç»Ÿè‡ªåŠ¨å¤„ç†æ‰€æœ‰æ¸¸æˆé€»è¾‘

### è®¾è®¡ç›®æ ‡

| ç›®æ ‡ | æè¿° |
|------|------|
| **é›¶äººå·¥å¹²é¢„** | AI Agent å®Œå…¨æ¥ç®¡è¯´ä¹¦äººèŒè´£ï¼Œæ— éœ€äººç±»ä¸»æŒ |
| **æè‡´å¼€å±€é€Ÿåº¦** | åˆ›å»ºæˆ¿é—´â†’å…¥åº§â†’å¼€å§‹æ¸¸æˆï¼Œå…¨ç¨‹ < 2 åˆ†é’Ÿ |
| **ä¸¥æ ¼ä¿¡æ¯éš”ç¦»** | æ¯ä¸ªç©å®¶åªèƒ½çœ‹åˆ°è‡ªå·±è¢«å…è®¸çœ‹åˆ°çš„ä¿¡æ¯ |
| **æ–­çº¿å¯æ¢å¤** | äº‹ä»¶æº¯æºæ¶æ„æ”¯æŒä»»æ„æ—¶åˆ»æ–­çº¿é‡è¿ |

## æŠ€æœ¯æ ˆ

### åç«¯ (Go)

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| **Go 1.25+** | æœåŠ¡ç«¯è¯­è¨€ |
| **Chi** | HTTP è·¯ç”±æ¡†æ¶ |
| **Gorilla WebSocket** | å®æ—¶åŒå‘é€šä¿¡ |
| **MySQL 8.0** | äº‹ä»¶æŒä¹…åŒ–å­˜å‚¨ |
| **Redis 7** | çŠ¶æ€ç¼“å­˜ã€ä¼šè¯ç®¡ç† |
| **RabbitMQ 3.12** | å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼ˆAgent è°ƒç”¨ï¼‰ |
| **Qdrant** | å‘é‡æ•°æ®åº“ï¼ˆRAG è¯­ä¹‰æ£€ç´¢ï¼‰ |
| **zap** | ç»“æ„åŒ–æ—¥å¿— |
| **OpenTelemetry** | åˆ†å¸ƒå¼è¿½è¸ª |
| **Prometheus** | æŒ‡æ ‡ç›‘æ§ |

### å‰ç«¯ (Vue 2)

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| **Vue 2.6** | å‰ç«¯æ¡†æ¶ |
| **Vue CLI 5.0** | æ„å»ºå·¥å…· |
| **Vuex 3.6** | çŠ¶æ€ç®¡ç† |
| **SCSS** | æ ·å¼é¢„å¤„ç† |
| **FontAwesome 5** | å›¾æ ‡åº“ |
| **WebSocket** | å®æ—¶äº‹ä»¶æ¥æ”¶ |

### è§†è§‰è®¾è®¡

UI è®¾è®¡å‚è€ƒäº†å¼€æºé¡¹ç›® [bra1n/townsquare](https://github.com/bra1n/townsquare)ï¼Œèåˆäº†å…¶ç»å…¸çš„æœ¨è´¨ä»¤ç‰Œè§†è§‰é£æ ¼ã€‚

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              å®¢æˆ·ç«¯å±‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Vue 3 + Vite + Pinia                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚TownSquareâ”‚ â”‚  Player  â”‚ â”‚   Vote   â”‚ â”‚    Modal System    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ (åº§ä½åœˆ) â”‚ â”‚ (ä»¤ç‰Œ)   â”‚ â”‚ (æŠ•ç¥¨)   â”‚ â”‚(è§’è‰²/ç‰ˆæœ¬/æé†’ç­‰)   â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚ WebSocket / HTTP                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              â–¼                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         Go Backend                                 â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                    API Gateway Layer                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  HTTP API â”‚  â”‚ WebSocket â”‚  â”‚      Auth (JWT)         â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚           â”‚              â”‚                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                    Room Manager                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚              Room Actor (per-room goroutine)         â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Game Engine  â”‚  â”‚  Visibility Projection    â”‚   â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  (FSM çŠ¶æ€æœº) â”‚  â”‚  (ä¿¡æ¯éš”ç¦»è¿‡æ»¤å™¨)          â”‚   â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚           â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                   Agent Orchestrator                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Setup Agent â”‚ â”‚ Night Agent â”‚ â”‚   Summary Agent     â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ (è§’è‰²åˆ†é…)  â”‚ â”‚ (å¤œæ™šç»“ç®—)  â”‚ â”‚   (å¤ç›˜ç”Ÿæˆ)        â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚           â”‚              â”‚              â”‚                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚              MCP Tool Registry                         â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  send_whisper | advance_phase | record_vote | ...      â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚           â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                     Event Store                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  Append-Only    â”‚  â”‚  Snapshot + Replay               â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  Event Stream   â”‚  â”‚  (çŠ¶æ€é‡å»º + æ–­çº¿æ¢å¤)            â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚                              æ•°æ®å±‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  MySQL 8.0  â”‚ â”‚  Redis 7    â”‚ â”‚ RabbitMQ    â”‚ â”‚    Qdrant       â”‚    â”‚
â”‚  â”‚  (äº‹ä»¶å­˜å‚¨) â”‚ â”‚ (çŠ¶æ€ç¼“å­˜)  â”‚ â”‚ (å¼‚æ­¥é˜Ÿåˆ—)  â”‚ â”‚  (å‘é‡æ£€ç´¢)     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€æœ¯äº®ç‚¹

### ğŸ”„ äº‹ä»¶æº¯æºæ¶æ„

é€šè¿‡äº‹ä»¶æº¯æºæ¶æ„è®¾è®¡å­˜å‚¨å±‚ï¼Œå°†æåã€æŠ•ç¥¨å’Œå¤„å†³ç­‰æ¸¸æˆæ“ä½œåºåˆ—åŒ–ä¸º**ä¸å¯å˜äº‹ä»¶æµ**ï¼š

- æ‰€æœ‰çŠ¶æ€å˜æ›´ä»¥ Append-Only äº‹ä»¶å½¢å¼å­˜å‚¨
- æ¯ä¸ªæˆ¿é—´ç‹¬ç«‹çš„å•è°ƒé€’å¢åºåˆ—å·
- Event Replay + å¿«ç…§æœºåˆ¶å®ç°çŠ¶æ€é‡å»ºä¸å…¨å±€å›æ”¾
- `last_seq` å¢é‡è¡¥å‘æœºåˆ¶æ”¯æ’‘æ–­çº¿é‡è¿åçš„çŠ¶æ€æ¢å¤

### ğŸ­ Actor æ¨¡å‹å¹¶å‘æ§åˆ¶

åŸºäº WebSocket çš„å®æ—¶é€šä¿¡å±‚ï¼Œåˆ©ç”¨ Actor æ¨¡å‹å°†æ¯ä¸ªæˆ¿é—´ä½œä¸ºç‹¬ç«‹çš„ Goroutine è¿è¡Œï¼š

- ä»¥ Channel ä¸²è¡ŒåŒ–å¤„ç†ç©å®¶æ“ä½œ
- ç»“åˆ `idempotency_key` åšå¹‚ç­‰å»é‡
- ç¡®ä¿é‡å¤æäº¤ä¸ç ´åçŠ¶æ€ï¼Œè§£å†³ç”¨æˆ·æ“ä½œç«æ€é—®é¢˜
- ä¿è¯æˆ¿é—´å†…é¡ºåºä¸€è‡´æ€§

### ğŸ¤– å¤š Agent åä½œæ¶æ„

è®¾è®¡ Orchestrator + Specialists çš„åˆ†å±‚å¤š Agent æ¶æ„ï¼š

| Agent | èŒè´£ |
|-------|------|
| **Main Agent** | FSM é©±åŠ¨æ¸¸æˆç”Ÿå‘½å‘¨æœŸï¼Œåè°ƒå­ Agent |
| **Setup Agent** | è§„åˆ™è®¡ç®—ã€è§’è‰²åˆ†é…ã€é…’é¬¼/ç”·çˆµç‰¹æ®Šå¤„ç† |
| **Night Agent** | æŠ€èƒ½ç»“ç®—ã€çœŸå‡ä¿¡æ¯ç”Ÿæˆã€çŠ¶æ€å˜æ›´ |
| **Summary Agent** | æ¸¸æˆå¤ç›˜ã€æ•…äº‹çº¿ç”Ÿæˆã€MVP è¯„é€‰ |

å…³é”®ç­‰å¾…ç‚¹å¼•å…¥è¶…æ—¶ä¸é»˜è®¤ç­–ç•¥ï¼ŒLLM è°ƒç”¨æ—è·¯å¼‚æ­¥åŒ–ï¼Œç»“æœä»¥äº‹ä»¶å›å†™ã€‚

### ğŸ”§ MCP åè®®å·¥å…·æ ‡å‡†åŒ–

åŸºäº MCP (Model Context Protocol) åè®®æ ‡å‡†åŒ–å·¥å…·æ¥å…¥è§„èŒƒï¼š

```
send_whisper     â†’ å‘é€ç§ä¿¡ç»™ç©å®¶
request_confirm  â†’ è¯·æ±‚ç©å®¶ç¡®è®¤
start_vote       â†’ å¼€å¯æŠ•ç¥¨
record_vote      â†’ è®°å½•æŠ•ç¥¨ç»“æœ
advance_phase    â†’ æ¨è¿›æ¸¸æˆé˜¶æ®µ
write_event      â†’ å†™å…¥äº‹ä»¶æµ
```

é•¿è€—æ—¶ä»»åŠ¡é€šè¿‡ RabbitMQ å¼‚æ­¥æ‰§è¡Œï¼Œç»Ÿä¸€æ²»ç†è¶…æ—¶é‡è¯•ã€å¹¶å‘é™åˆ¶ä¸å®¡è®¡è®°å½•ã€‚

### ğŸ”’ å¯è§æ€§æŠ•å½±ï¼ˆä¿¡æ¯éš”ç¦»ï¼‰

é€šè¿‡å¯è§æ€§æŠ•å½±å®ç°ä¸¥æ ¼çš„é¢†åŸŸå±‚ä¿¡æ¯éš”ç¦»ï¼š

| äº‹ä»¶ç±»å‹ | å¯è§èŒƒå›´ |
|----------|----------|
| `public.chat` | æ‰€æœ‰æˆ¿é—´æˆå‘˜ |
| `whisper.sent` | å‘é€è€…ã€æ¥æ”¶è€…ã€ç³»ç»Ÿ |
| `role.assigned` | ç›®æ ‡ç©å®¶ã€ç³»ç»Ÿ |
| `night.info` | è¡ŒåŠ¨è€…ï¼ˆçœŸ/å‡ä¿¡æ¯ï¼‰ |
| `death.announced` | æ‰€æœ‰ç©å®¶ |

æœåŠ¡ç«¯æŒ‰ç©å®¶èº«ä»½å¯¹äº‹ä»¶ä¸çŠ¶æ€åšæƒé™è£å‰ªï¼Œç¡®ä¿ç©å®¶ç«¯ä»…æ¥æ”¶å…¶åº”çŸ¥ä¿¡æ¯ã€‚

### ğŸ“š RAG è¯­ä¹‰æ£€ç´¢

åŸºäº Qdrant å‘é‡æ•°æ®åº“æ­å»º RAG ç³»ç»Ÿï¼š

- æ¸¸æˆè§„åˆ™ä¹¦åŠè§’è‰²æŠ€èƒ½çš„è¯­ä¹‰æ£€ç´¢
- å¯¹å±€çŸ­æœŸè®°å¿†ä¸é˜¶æ®µæ‘˜è¦çš„æ£€ç´¢å¢å¼º
- åŠ¨æ€ä¸Šä¸‹æ–‡æ³¨å…¥å‡å°‘ LLM åœ¨å¤„ç†å¤æ‚è§„åˆ™æ—¶çš„å¹»è§‰

## ä¸šåŠ¡åŠŸèƒ½

### ğŸ  æˆ¿é—´ä¸å¤§å…é˜¶æ®µ

| åŠŸèƒ½ | æè¿° |
|------|------|
| **åˆ›å»ºæˆ¿é—´** | ç”Ÿæˆ 4-6 ä½æ•°å­—æˆ¿é—´å·ï¼Œæ— éœ€ç™»å½• |
| **åŠ å…¥æˆ¿é—´** | è¾“å…¥æˆ¿é—´å·å³å¯åŠ å…¥ |
| **åº§ä½ç»‘å®š** | åœ†æ¡Œè§†å›¾é€‰åº§ï¼Œåº§ä½é¡ºåºå½±å“æŠ€èƒ½åˆ¤å®š |
| **å‰§æœ¬é€‰æ‹©** | æˆ¿ä¸»é€‰æ‹©å‰§æœ¬ï¼ˆæš—æµæ¶ŒåŠ¨ç­‰ï¼‰ |
| **å¼€å§‹æ¸¸æˆ** | å…¨å‘˜å°±åº§åä¸€é”®å¼€å§‹ï¼Œè‡ªåŠ¨é”å®šæˆ¿é—´ |

### ğŸ­ è§’è‰²ç³»ç»Ÿ

æ”¯æŒå®Œæ•´çš„ã€Šæš—æµæ¶ŒåŠ¨ (Trouble Brewing)ã€‹å‰§æœ¬ï¼š

**é•‡æ°‘ï¼ˆ13 ä¸ªï¼‰**
| è§’è‰² | èƒ½åŠ› |
|------|------|
| æ´—è¡£å¦‡ | é¦–å¤œå¾—çŸ¥ä¸¤åç©å®¶ä¸­æœ‰ä¸€äººæ˜¯æŸä¸ªæ‘æ°‘ |
| å›¾ä¹¦ç®¡ç†å‘˜ | é¦–å¤œå¾—çŸ¥ä¸¤åç©å®¶ä¸­æœ‰ä¸€äººæ˜¯æŸä¸ªå¤–æ¥è€… |
| è°ƒæŸ¥å‘˜ | é¦–å¤œå¾—çŸ¥ä¸¤åç©å®¶ä¸­æœ‰ä¸€äººæ˜¯æŸä¸ªçˆªç‰™ |
| å¨å¸ˆ | é¦–å¤œå¾—çŸ¥åœºä¸Šæœ‰å¤šå°‘å¯¹ç›¸é‚»çš„é‚ªæ¶ç©å®¶ |
| å…±æƒ…è€… | æ¯å¤œå¾—çŸ¥ç›¸é‚»å­˜æ´»ç©å®¶ä¸­æœ‰å¤šå°‘ä¸ªé‚ªæ¶ |
| å åœå¸ˆ | æ¯å¤œé€‰æ‹©ä¸¤åç©å®¶å¾—çŸ¥å…¶ä¸­æ˜¯å¦æœ‰æ¶é­” |
| é€è‘¬è€… | æ¯å¤œå¾—çŸ¥å½“å¤©è¢«å¤„å†³ç©å®¶çš„è§’è‰² |
| åƒ§ä¾£ | æ¯å¤œå®ˆæŠ¤ä¸€åç©å®¶å…å—æ¶é­”ä¼¤å®³ |
| å®ˆé¸¦äºº | è‹¥åœ¨å¤œæ™šæ­»äº¡ï¼Œé€‰æ‹©ä¸€åç©å®¶å¾—çŸ¥å…¶è§’è‰² |
| è´æ´è€… | é¦–æ¬¡è¢«æ‘æ°‘æåæ—¶ï¼Œè¯¥æ‘æ°‘ç«‹å³è¢«å¤„å†³ |
| çŒæ‰‹ | ä¸€å±€æ¸¸æˆä¸­å¯é€‰æ‹©ä¸€åç©å®¶ï¼Œè‹¥æ˜¯æ¶é­”åˆ™æ€æ­» |
| å£«å…µ | ä¸ä¼šè¢«æ¶é­”æ€æ­» |
| é•‡é•¿ | ä¸‰äººå­˜æ´»æ—¶è‹¥æ²¡æœ‰è¢«å¤„å†³åˆ™å–„æ–¹èƒœåˆ© |

**å¤–æ¥è€…ï¼ˆ2 ä¸ªï¼‰**
- ç®¡å®¶ï¼šæ¯å¤œé€‰æ‹©ä¸»äººï¼Œåªèƒ½åœ¨ä¸»äººæŠ•ç¥¨æ—¶æŠ•ç¥¨
- é…’é¬¼ï¼šä»¥ä¸ºè‡ªå·±æ˜¯æ‘æ°‘ä½†å®é™…ä¸­æ¯’ï¼Œèƒ½åŠ›æ— æ•ˆ

**çˆªç‰™ï¼ˆ4 ä¸ªï¼‰**
- æŠ•æ¯’è€…ï¼šæ¯å¤œé€‰æ‹©ä¸€åç©å®¶ä¸­æ¯’
- é—´è°ï¼šå¯ä»¥çœ‹åˆ°æ‰€æœ‰ç©å®¶çš„è§’è‰²
- ç”·çˆµï¼šåœºä¸Šå¤–æ¥è€…+2ï¼Œæ‘æ°‘-2
- çº¢å”‡å¥³éƒï¼šæ¶é­”æ­»äº¡æ—¶å¯ä»£æ›¿æˆä¸ºæ¶é­”

**æ¶é­”ï¼ˆ1 ä¸ªï¼‰**
- å°æ¶é­”ï¼šæ¯å¤œæ€æ­»ä¸€åç©å®¶

### ğŸŒ™ å¤œæ™šé˜¶æ®µ

| æµç¨‹ | æè¿° |
|------|------|
| **å…¥å¤œæ’­æŠ¥** | "å¤©é»‘è¯·é—­çœ¼"ï¼ŒUI å˜ä¸ºé»‘æš—çŠ¶æ€ |
| **å”¤é†’é˜Ÿåˆ—** | æŒ‰å‰§æœ¬é¡ºåºä¾æ¬¡å”¤é†’è§’è‰² |
| **æŠ€èƒ½æ“ä½œ** | å½“å‰è¡ŒåŠ¨ç©å®¶å¯è§æ“ä½œç•Œé¢ |
| **ç»“ç®—å¤„ç†** | åˆ¤æ–­ä¸­æ¯’/é†‰é…’çŠ¶æ€ï¼Œç”ŸæˆçœŸ/å‡ä¿¡æ¯ |
| **ä¿¡æ¯å‘æ”¾** | å®æ—¶æ¨é€ç»“ç®—ç»“æœåˆ°ç©å®¶ç«¯ |

### â˜€ï¸ ç™½å¤©é˜¶æ®µ

| æµç¨‹ | æè¿° |
|------|------|
| **å¤©äº®ç»“ç®—** | å…¬å¸ƒæ˜¨å¤œæ­»äº¡ç©å®¶ |
| **è‡ªç”±è®¨è®º** | å¯é…ç½®å€’è®¡æ—¶ |
| **å‘èµ·æå** | å­˜æ´»ç©å®¶å¯æåä»–äºº |
| **è¾©æŠ¤æµç¨‹** | æåè€…å‘è¨€ â†’ è¢«æåè€…è¾©æŠ¤ |
| **æŠ•ç¥¨ç³»ç»Ÿ** | åŒæ„/å¼ƒç¥¨ï¼Œæ­»äººç¥¨ä»…é™ä¸€æ¬¡ |
| **å¤„å†³ç»“ç®—** | ç¥¨æ•°è¿‡åŠä¸”æœ€é«˜è€…è¢«å¤„å†³ |

### ğŸ† æ¸¸æˆç»“æŸä¸å¤ç›˜

| åŠŸèƒ½ | æè¿° |
|------|------|
| **èƒœè´Ÿåˆ¤å®š** | æ¶é­”æ­»äº¡æˆ–ä»…å‰© 2 äºº |
| **æ™ºèƒ½å¤ç›˜** | AI ç”Ÿæˆæ•…äº‹çº¿å›é¡¾ |
| **MVP è¯„é€‰** | è¶£å‘³æ€§ç©å®¶è¡¨ç°è¯„ä»· |

### ğŸ¨ UI è§†è§‰

- Townsquare é£æ ¼çš„åœ†å½¢åº§ä½å¸ƒå±€
- æœ¨è´¨ä»¤ç‰Œçº¹ç†
- é˜µè¥é¢œè‰²åŒºåˆ†ï¼ˆè“/é’/æ©™/çº¢ï¼‰
- å¤œæ™š/ç™½å¤©æ°›å›´åˆ‡æ¢
- æ­»äº¡é®ç½©å’Œé¬¼é­‚çŠ¶æ€

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- **Docker & Docker Compose** (ç”¨äºå¯åŠ¨ MySQLã€Redisã€RabbitMQã€Qdrant)
- **Go 1.25+** (ç”¨äºç¼–è¯‘åç«¯)
- **Node.js 18+** (ç”¨äºå‰ç«¯å¼€å‘)

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/Blood-on-the-Clocktower-auto-dm.git
cd Blood-on-the-Clocktower-auto-dm
```

### 2. å¯åŠ¨åŸºç¡€è®¾æ–½ï¼ˆæ•°æ®åº“ & ä¸­é—´ä»¶ï¼‰

```bash
cd backend
docker-compose up -d
```

ç­‰å¾…æ‰€æœ‰å®¹å™¨å¥åº·æ£€æŸ¥é€šè¿‡ï¼ˆçº¦ 30 ç§’ï¼‰ï¼š

```bash
docker-compose ps
```

ç¡®è®¤æ‰€æœ‰æœåŠ¡çŠ¶æ€ä¸º `healthy`ï¼š
- `botc_mysql` - MySQL 8.0 (ç«¯å£ 3316)
- `botc_redis` - Redis 7 (ç«¯å£ 6389)
- `botc_rabbitmq` - RabbitMQ 3.12 (ç«¯å£ 5672, ç®¡ç†ç•Œé¢ 15672)
- `botc_qdrant` - Qdrant å‘é‡æ•°æ®åº“ (ç«¯å£ 6333)

### 3. å¯åŠ¨åç«¯æœåŠ¡

```bash
# åœ¨ backend ç›®å½•ä¸‹
make build
./bin/agentdm
```

æˆ–ä½¿ç”¨å¼€å‘æ¨¡å¼ä¸€é”®å¯åŠ¨ï¼š

```bash
make dev
```

åç«¯æœåŠ¡å¯åŠ¨åœ¨ `http://localhost:8080`

### 4. å¯åŠ¨å‰ç«¯æœåŠ¡

æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼š

```bash
cd frontend
npm install
npm run dev
```

å‰ç«¯æœåŠ¡å¯åŠ¨åœ¨ `http://localhost:8081`

### 5. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:8081` å³å¯å¼€å§‹æ¸¸æˆï¼

### ç¯å¢ƒå˜é‡é…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€å¯ç”¨ AI Agent åŠŸèƒ½ï¼Œè®¾ç½® Google Gemini API Keyï¼š

```bash
export GEMINI_API_KEY=your-gemini-api-key
```

è·å–å…è´¹çš„ Gemini API Keyï¼šhttps://aistudio.google.com/apikey

## API æ–‡æ¡£

### æˆ¿é—´æ“ä½œ

```bash
# åˆ›å»ºæˆ¿é—´
curl -X POST http://localhost:8080/v1/rooms

# åŠ å…¥æˆ¿é—´
curl -X POST http://localhost:8080/v1/rooms/{room_id}/join

# è·å–äº‹ä»¶
curl http://localhost:8080/v1/rooms/{room_id}/events?after_seq=0
```

### WebSocket åè®®

è¿æ¥ï¼š`ws://localhost:8080/ws`

```json
// è®¢é˜…æˆ¿é—´
{"type": "subscribe", "request_id": "1", "payload": {"room_id": "xxx", "last_seq": 0}}

// å‘é€å‘½ä»¤
{"type": "command", "request_id": "2", "payload": {"command_id": "xxx", "type": "public_chat", "data": {"message": "Hello"}}}
```

## å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
Blood-on-the-Clocktower-auto-dm/
â”œâ”€â”€ backend/                    # Go åç«¯
â”‚   â”œâ”€â”€ cmd/server/            # å…¥å£
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ agent/             # AI Agent ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ api/               # HTTP/WebSocket å¤„ç†
â”‚   â”‚   â”œâ”€â”€ auth/              # è®¤è¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ config/            # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ engine/            # æ¸¸æˆå¼•æ“
â”‚   â”‚   â”œâ”€â”€ game/              # æ¸¸æˆé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ mcp/               # MCP åè®®å·¥å…·
â”‚   â”‚   â”œâ”€â”€ projection/        # å¯è§æ€§æŠ•å½±
â”‚   â”‚   â”œâ”€â”€ queue/             # æ¶ˆæ¯é˜Ÿåˆ—
â”‚   â”‚   â”œâ”€â”€ rag/               # RAG æ£€ç´¢
â”‚   â”‚   â”œâ”€â”€ realtime/          # å®æ—¶é€šä¿¡
â”‚   â”‚   â”œâ”€â”€ room/              # æˆ¿é—´ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ store/             # æ•°æ®å­˜å‚¨
â”‚   â”‚   â””â”€â”€ types/             # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ db/                    # æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ docker-compose.yml     # åŸºç¡€è®¾æ–½é…ç½®
â”‚
â”œâ”€â”€ frontend/                   # Vue 2 å‰ç«¯ (åŸºäº townsquare)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.js            # å…¥å£
â”‚   â”‚   â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ store/             # Vuex çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ grimoire.js    # é­”å…¸çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ players.js     # ç©å®¶çŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ session.js     # ä¼šè¯çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ components/        # Vue ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ TownSquare.vue # åº§ä½åœˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ Player.vue     # ç©å®¶ä»¤ç‰Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ Token.vue      # è§’è‰²ä»¤ç‰Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ Menu.vue       # æ§åˆ¶èœå•
â”‚   â”‚   â”‚   â”œâ”€â”€ Vote.vue       # æŠ•ç¥¨ç•Œé¢
â”‚   â”‚   â”‚   â””â”€â”€ modals/        # æ¨¡æ€æ¡†
â”‚   â”‚   â””â”€â”€ assets/            # é™æ€èµ„æº
â”‚   â””â”€â”€ public/                # å…¬å…±èµ„æº
â”‚
â”œâ”€â”€ assets/rules/              # æ¸¸æˆè§„åˆ™æ–‡æ¡£
â”œâ”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ townsquare/                # UI å‚è€ƒé¡¹ç›®
```

### å¸¸ç”¨å‘½ä»¤

```bash
# åç«¯
cd backend
make build          # ç¼–è¯‘
make run            # è¿è¡Œ
make test           # æµ‹è¯•
make docker-up      # å¯åŠ¨åŸºç¡€è®¾æ–½
make docker-down    # åœæ­¢åŸºç¡€è®¾æ–½

# å‰ç«¯
cd frontend
npm run serve       # å¼€å‘æ¨¡å¼ (ç«¯å£ 8081)
npm run build       # ç”Ÿäº§æ„å»º
```

---

<a name="english-documentation"></a>
# ğŸ“– English Documentation

## Overview

This project is an automated system for the tabletop game "Blood on the Clocktower" that can **fully replace a human Storyteller** for game flow management, rule enforcement, information distribution, and game recap.

### Core Features

- ğŸ® **Offline Gathering**: Players sit face-to-face, each participating via mobile phone
- ğŸ“± **Login-free Quick Start**: No registration required, join with room code
- ğŸ¤– **AI Auto-Storytelling**: Multi-agent collaboration system handles all game logic

## Tech Stack

### Backend (Go)

| Technology | Purpose |
|------------|---------|
| **Go 1.21+** | Server language |
| **Chi** | HTTP routing |
| **Gorilla WebSocket** | Real-time communication |
| **MySQL 8.0** | Event persistence |
| **Redis 7** | State caching |
| **RabbitMQ 3.12** | Async task queue |
| **Qdrant** | Vector database (RAG) |

### Frontend (Vue 3)

| Technology | Purpose |
|------------|---------|
| **Vue 3.4** | Frontend framework |
| **Vite 5.0** | Build tool |
| **Pinia 2.1** | State management |
| **TypeScript 5.3** | Type system |
| **SCSS** | Style preprocessing |
| **FontAwesome 6** | Icons |

## Technical Highlights

### Event Sourcing Architecture

All game operations (nominations, votes, executions) are serialized as **immutable event streams**:

- Append-only event storage
- Per-room monotonic sequence numbers
- Event Replay + Snapshot for state reconstruction
- `last_seq` mechanism for reconnection recovery

### Actor Model Concurrency

Each room runs as an independent Goroutine:

- Channel-based serial command processing
- Idempotency key deduplication
- Room-level sequential consistency

### Multi-Agent Collaboration

Orchestrator + Specialists architecture:

| Agent | Responsibility |
|-------|----------------|
| **Main Agent** | FSM-driven game lifecycle |
| **Setup Agent** | Role distribution, special rules |
| **Night Agent** | Ability resolution, info generation |
| **Summary Agent** | Game recap, storyline generation |

### MCP Protocol Tools

Standardized tool interfaces via Model Context Protocol:
- `send_whisper`, `start_vote`, `record_vote`, `advance_phase`, etc.

### Visibility Projection

Strict information isolation per player identity:
- Public chat â†’ all players
- Private whisper â†’ sender, recipient only
- Role assignment â†’ target player only

## Quick Start

### Prerequisites

- Docker & Docker Compose
- Go 1.21+
- Node.js 18+

### 1. Clone Repository

```bash
git clone https://github.com/your-username/Blood-on-the-Clocktower-auto-dm.git
cd Blood-on-the-Clocktower-auto-dm
```

### 2. Start Infrastructure

```bash
cd backend
docker-compose up -d
```

### 3. Start Backend

```bash
make build
./bin/agentdm
```

Backend runs at `http://localhost:8080`

### 4. Start Frontend

```bash
cd frontend
npm install
npm run dev
```

Frontend runs at `http://localhost:8081`

### 5. Access Application

Open `http://localhost:8081` in your browser!

## Development

```bash
# Backend
cd backend && make build && make run

# Frontend
cd frontend && npm run dev
```

---

## License

MIT License - see [LICENSE](LICENSE) for details.
